"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5348],{55348:function(e,t,r){r.d(t,{Li:function(){return z}});var n=r(60629),o=r(56963),c=r(67400),a=r(14618),i=r(5632),u=r(2784),l=r(56580),s=r(89426),d=r(44093),p=r(35223),O=r(55266),f=r(61547),y=r(39218),g=r(87677),v=r(74342),h=r(24678),b=r(94689),j=r(67821),m=r(52875),S=r(86672),w=r(44045),P=r(75793),_=r(20309),E=r(52322);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let k=e=>{let{currentContentItem:t}=e,r=(0,_.P)(t),{showNextContentInterstitials:n}=(0,u.useContext)(d.xV),o=(0,l.useDispatch)(),c=(0,l.useSelector)(b.M0),a=(0,l.useSelector)(h.hK),s=(0,l.useSelector)(m.z_),{showMobileWarningWall:T,showMobileIntroModal:k}=(0,P.O)(t.type);(0,v.N)();let N=(0,l.useSelector)(m.ph),{query:{journeySlug:D,pathSlug:x}}=(0,i.useRouter)(),A=D?(0,y.ay)(D):(0,y.cn)(x);if((0,u.useEffect)(()=>{a&&o((0,j.K4)({type:"PaidExclusiveOverlay",returnPath:A})),T&&o((0,j.K4)({type:"MobileWarningWall",returnPath:A})),k&&o((0,j.K4)({type:"MobileIntroModal",returnPath:A}))},[o,A,a,T,k]),c.content_ids){var R;(R=window).dataLayer||(R.dataLayer=[]),window.dataLayer.push({event:"content_id_loaded",content_id:(0,S.I)(c.content_ids)})}let C=(0,g.L)(t,s);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(p.V,{title:N}),n?(0,E.jsx)(O.e,{currentContentItem:r,interstitialsToMerge:C}):(0,E.jsx)(w.Z,{trackVisit:e=>(0,f.Fs)(I(I({},e),c)),currentContentItem:r})]})};var N=r(57370),D=r.n(N);let x=e=>{let{pathSlug:t,trackSlug:r,moduleSlug:n,contentItemType:o,contentItemSlug:c,exerciseSlug:a}=e,i="/paths/".concat(t,"/tracks/").concat(r,"/modules/").concat(n);if(!o||!c)return i;if(a)return"".concat(i,"/lessons/").concat(c,"/exercises/").concat(a);let u=(0,y.kF)(D()(o));return"".concat(i,"/").concat(u,"/").concat(c)},A=e=>{let{pathSlug:t,trackSlug:r,moduleSlug:n,contentItemSlug:o,exerciseSlug:c}=e;return"/paths/".concat(t,"/tracks/").concat(r,"/modules/").concat(n,"/lessons/").concat(o,"/exercises/").concat(c)};var R=r(2756),C=r(99724),G=r(49833),U=r(19592),q=r(53675);let K=q.wqZ,M=q.VrK,L=q.XA9;var F=r(23368);let V=()=>{let{query:{pathSlug:e}}=(0,i.useRouter)(),t=(0,l.useDispatch)(),r=(0,l.useSelector)(n.bB),o=(0,l.useSelector)(n.md),c=(0,l.useSelector)(n.vn),a=(0,l.useSelector)(F.Xc),s={service:C.Hj.GraphqlGateway,headers:{Authorization:"Bearer ".concat(o)}},{data:d,error:p}=(0,R.aM)(L,{context:s,variables:{slug:e,userId:c,includeProgress:!!o},skip:r||a});(0,u.useEffect)(()=>{null!=d&&d.path&&t((0,U.dh)(null==d?void 0:d.path))},[null==d?void 0:d.path,t]),(0,u.useEffect)(()=>{p&&(0,G.H)(p)},[p])},z=e=>{let{currentContentItem:t}=e,{push:r,query:{pathSlug:s,trackSlug:d,moduleSlug:p,contentItemSlug:O}}=(0,i.useRouter)(),f=(0,l.useSelector)(n.bB);V(),(0,a.m)();let y=(0,u.useCallback)(e=>{r(A({pathSlug:s,trackSlug:d,moduleSlug:p,contentItemSlug:O,exerciseSlug:e}),void 0,{shallow:!0})},[s,d,p,O,r]);return!t||f?(0,E.jsx)(o.o,{}):(0,E.jsx)(c.M,{navigateToExercise:y,children:(0,E.jsx)(k,{currentContentItem:t})})};var H=r(73713);let B=e=>{var t;let r=e.slug,n=null==e||null===(t=e.journeys)||void 0===t?void 0:t[0];if(!(null!=e&&e.released)&&n)return{redirect:{destination:"/journeys/".concat(null==n?void 0:n.slug,"/paths/").concat(r),permanent:!1}}},Z=e=>{let t="string"==typeof e?(0,H.v6)(e):void 0;if(t)return{redirect:{destination:"/journeys/".concat(t.slug),permanent:!1}}};r(96480),r(60110),r(85320);var X=r(73956),W=r(11993),J=r(31141);let Q=e=>{let{path:t,returnUrl:r,isGold:n,isBusinessUser:o,isSkillsoftUser:c}=e;if(!n)return{redirect:{destination:(0,J.Fy)({changePlan:!0,redirectUrl:r}),permanent:!1}};let a=!o&&!c,i=Z(t.slug);if(i&&a)return i;let u=B(t);if(u&&a)return u};function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}(0,W.z)(async(e,t)=>{var r,n,o,c,a,i;let{client:u,pageProps:l,userSession:d}=t,{params:p,req:{cookies:O},resolvedUrl:f}=e;if(!p)return{notFound:!0};let{pathSlug:y,moduleSlug:g}=p,v=O.cc_jwt,{reduxData:{currentUser:{id:h,isBusinessUser:b,isSkillsoftUser:j,roles:{isAnonymous:m,isPro:S},showTrialCTA:w,isGold:P}}}=l,{data:{path:_,contentModule:E},errors:T}=await u.query({query:M,context:{service:C.Hj.GraphqlGateway,headers:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},v?{Authorization:"Bearer ".concat(v)}:{})},variables:{slug:y,userId:d?d.id:h,isAnon:!v||m,moduleSlug:g||""}});if(!_)return{notFound:!0};if(m)return{props:l};if(!S)return{redirect:{destination:(0,J.o7)({isTrial:w,redirectUrl:f}),permanent:!1}};if(_.goal===X.VO.Career){let e=Q({path:_,returnUrl:f,isGold:P,isBusinessUser:b,isSkillsoftUser:j});if(e)return e}let I=null==_?void 0:_.pathResumeLocation,k=null==E?void 0:E.resumeLocation;return I&&I.track&&I.contentModule?{redirect:{destination:k?x({pathSlug:y,trackSlug:null==I||null===(r=I.track)||void 0===r?void 0:r.slug,moduleSlug:k.contentModuleSlug,contentItemType:k.contentItemType,contentItemSlug:k.contentItemSlug,exerciseSlug:k.exerciseSlug}):x({pathSlug:y,trackSlug:null==I||null===(n=I.track)||void 0===n?void 0:n.slug,moduleSlug:null==I||null===(o=I.contentModule)||void 0===o?void 0:o.slug,contentItemType:null==I||null===(c=I.contentItem)||void 0===c?void 0:c.type,contentItemSlug:null==I||null===(a=I.contentItem)||void 0===a?void 0:a.slug,exerciseSlug:null==I||null===(i=I.exercise)||void 0===i?void 0:i.slug}),permanent:!1}}:((0,G.H)("There was an error fetching a resume location for this path with slug ".concat(y),T),{notFound:!0})});var $=r(63502),ee=r(47004);let et={notFound:!0};function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function en(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,W.z)(async(e,t)=>{var r,n,o,c,a;let{client:i,pageProps:u,userSession:l}=t,{params:s,req:d,resolvedUrl:p}=e;if(!(null!=s&&s.pathSlug))return{notFound:!0};let O=s.pathSlug,f=d.cookies.cc_jwt||(null==l?void 0:l.jwt),{reduxData:{currentUser:{id:y,isBusinessUser:g,isSkillsoftUser:v,roles:{isAnonymous:h,isPro:b},showTrialCTA:j,isGold:m}}}=u,{data:{path:S},errors:w}=await i.query({query:K,context:{service:C.Hj.GraphqlGateway,headers:en({},f?{Authorization:"Bearer ".concat(f)}:{})},variables:{slug:O,userId:l?l.id:y,isAnon:h}});if(!S)return et;if(!b)return{redirect:{destination:(0,J.o7)({isTrial:j,redirectUrl:p}),permanent:!1}};if(S.goal===q.VOs.Career){let e=Q({path:S,returnUrl:p,isGold:m,isBusinessUser:g,isSkillsoftUser:v});if(e)return e}let P=null==S?void 0:S.pathResumeLocation;return P&&P.track&&P.contentModule?(S.enrollmentStatus===$.m.None&&await (0,ee.Xu)(S.id,en({},null!=l&&l.authentication_token?{"X-Auth-Token":null==l?void 0:l.authentication_token}:{})),{redirect:{destination:x({pathSlug:O,trackSlug:null==P||null===(r=P.track)||void 0===r?void 0:r.slug,moduleSlug:null==P||null===(n=P.contentModule)||void 0===n?void 0:n.slug,contentItemType:null==P||null===(o=P.contentItem)||void 0===o?void 0:o.type,contentItemSlug:null==P||null===(c=P.contentItem)||void 0===c?void 0:c.slug,exerciseSlug:null==P||null===(a=P.exercise)||void 0===a?void 0:a.slug}),permanent:!1}}):((0,G.H)("There was an error fetching a resume location for this path with slug ".concat(O),w),et)});var eo=r(17979);let ec=q.Ood;var ea=r(45455),ei=r.n(ea);function eu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function el(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,W.z)(async(e,t)=>{let{client:r,userSession:n,pageProps:o}=t,{params:c,query:{extPathSlug:a},resolvedUrl:i,req:u}=e;if(!c)return{notFound:!0};let l=u.cookies.cc_jwt||(null==n?void 0:n.jwt),{isSkillsoftUser:s}=o.reduxData.currentUser;if(s)return{redirect:{destination:"/",permanent:!1}};let d=(0,y.Vj)(a);if(!n)return{redirect:{destination:d,permanent:!1}};let{isAnonymous:p,isPro:O}=n.roles;if(!p&&!O)return{redirect:{destination:(0,y.b3)({planId:"proGoldAnnualV2_7trial",redirectUrl:i}),permanent:!1}};try{let{data:{externalPath:e}}=await r.query({query:ec,context:el({service:C.Hj.GraphqlGateway},l&&{headers:{Authorization:"Bearer ".concat(l)}}),variables:{slug:a}});if(ei()(e))return{notFound:!0};let t=await (0,eo.u9)(n.id,e.url);return"none"!==e.enrollmentStatus||p||await (0,ee.rm)(e.id,{"X-Auth-Token":n.authentication_token}),p||await (0,eo.Hw)(n.id,e.id,"EXTERNAL_PATH"),{props:el(el({},o),{},{isAnonymous:p,launchUrl:t,externalPath:e})}}catch(e){return(0,G.H)(e),{redirect:{destination:d,permanent:!1}}}})},17979:function(e,t,r){r.d(t,{Hw:function(){return O},u9:function(){return p}});var n=r(89426),o=r(7321),c=r(34406);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let u="".concat(c.env.SKS_CONTENT_INTEGRATION_SERVICE_URL,"/organizations/").concat(c.env.SKS_CONTENT_INTEGRATION_CONSUMER_ORG_ID,"/content-token?"),l="".concat(c.env.SKS_CONTENT_INTEGRATION_SERVICE_URL,"/tincan/launch?"),s={Authorization:"Bearer ".concat(c.env.SKS_CONTENT_INTEGRATION_SERVICE_TOKEN),"x-author-service-accountid":"".concat(c.env.SKS_CONTENT_INTEGRATION_SERVICE_ACCOUNT_ID)},d=(e,t)=>({activity_id:t,actor:JSON.stringify({objectType:"Agent",account:{homePage:"https://codecademy.com/",name:e}})}),p=async(e,t)=>{let r=d(e,t),n=new URLSearchParams(r),o=await fetch(u+n,{headers:s}),c=await o.json();return l+new URLSearchParams(i(i({},r),{},{content_token:c.contentToken}))},O=(e,t,r)=>{let n={Authorization:"Basic ".concat(c.env.SKS_TRACKING_TOKEN)};return(0,o.y)({method:"POST",endpoint:"/progress/external_courses",data:{codecademyUserId:e,contentType:r,contentUuid:t,time:Date.now(),userAction:"PROGRESSED"},headers:n}).then((0,o._)({errorMessage:"Failed to update progress for ".concat(r,": ").concat(t),logAndSwallowErrors:!0}))}}}]);
//# sourceMappingURL=5348-07d5df6a510a3d18.js.map